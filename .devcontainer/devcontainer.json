{
  "name": "backend-starter",
  "image": "mcr.microsoft.com/devcontainers/base:jammy",
  "features": {
    "ghcr.io/devcontainers/features/java:1": {
      "installGradle": true,
      "installMaven": true,
      "version": "17",
      "jdkDistro": "ms"
    },
    "ghcr.io/devcontainers-contrib/features/springboot-sdkman:2": {
      "version": "latest",
      "jdkVersion": "latest",
      "jdkDistro": "ms"
    }
  },
  "postCreateCommand": {
    "Oh My Zsh Installer for Docker": "bash ${containerWorkspaceFolder}/.devcontainer/scripts/zsh-in-docker.sh -t jonathan -p git -p ssh-agent -p https://github.com/zsh-users/zsh-autosuggestions -p https://github.com/zsh-users/zsh-completions -p gradle -p sdk",
    "SDK env install": "echo \"sdkman_auto_env=true\" >> /usr/local/sdkman/etc/config"
  },
  "portsAttributes": {
    "8080": {
      "label": "Application port"
    },
    "64120": {
      "label": "SonarLint"
    }
  },
  "containerUser": "vscode",
  "workspaceMount": "source=${localWorkspaceFolder},target=/home/vscode/workspace,type=bind,consistency=cached",
  "workspaceFolder": "/home/vscode/workspace",
  "customizations": {
    "vscode": {
      "extensions": [
        "vscjava.vscode-java-pack",
        "vscjava.vscode-gradle",
        "vmware.vscode-boot-dev-pack",
        "redhat.vscode-community-server-connector",
        "shengchen.vscode-checkstyle",
        "redhat.vscode-xml",
        "redhat.vscode-yaml",
        "vscjava.vscode-lombok",
        "oderwat.indent-rainbow",
        // "streetsidesoftware.code-spell-checker",
        "eamodio.gitlens",
        "PKief.material-icon-theme",
        "EditorConfig.EditorConfig",
        "aaron-bond.better-comments",
        "liamhammett.inline-parameters",
        "mhutchie.git-graph",
        "SonarSource.sonarlint-vscode",
        "usernamehw.errorlens",
        "Huuums.vscode-fast-folder-structure",
        "fabiospampinato.vscode-todo-plus",
        "asciidoctor.asciidoctor-vscode",
        "cmoog.sqlnotebook",
        "ithildir.java-properties",
        "IBM.output-colorizer"
      ],
      "settings": {
        // Editor
        "editor.codeActionsOnSave": {
          "source.fixAll": true,
          "source.organizeImports": true
        },
        "editor.foldingImportsByDefault": true,
        "editor.formatOnPaste": true,
        "editor.formatOnSave": true,
        // JAVA
        "java.checkstyle.configuration": "/google_checks.xml",
        "java.checkstyle.version": "10.12.4",
        "java.format.settings.url": "https://raw.githubusercontent.com/google/styleguide/gh-pages/eclipse-java-google-style.xml",
        "java.format.settings.profile": "GoogleStyle",
        "java.compile.nullAnalysis.mode": "automatic",
        "java.jdt.ls.java.home": "/usr/local/sdkman/candidates/java/17.0.9-ms",
        "java.configuration.runtimes": [
          {
            "name": "JavaSE-17",
            "path": "/usr/local/sdkman/candidates/java/17.0.9-ms",
            "default": true
          }
        ],
        "java.compile.nullAnalysis.mode": "automatic",
        "java.configuration.updateBuildConfiguration": "interactive",
        "java.jdt.ls.vmargs": "-XX:+UseParallelGC -XX:GCTimeRatio=4 -XX:AdaptiveSizePolicyWeight=90 -Dsun.zip.disableMemoryMapping=true -Xmx4G -Xms100m -Xlog:disable",
        // Telemetry
        "sonarlint.disableTelemetry": true,
        "gitlens.telemetry.enabled": false,
        "redhat.telemetry.enabled": false,
        // ETC
        "vsintellicode.typescript.completionsEnabled": false,
        "intellicodeApiExamples.typescript.enabled": false,
        "files.exclude": {
          "**/.DS_Store": true,
          "**/.git": true,
          "**/.hg": true,
          "**/.svn": true,
          "**/CVS": true,
          "**/Thumbs.db": true,
          "**/.gradle": true,
          "**/bin": true,
          "gradlew": true,
          "gradlew.bat": true
        },
        "terminal.integrated.defaultProfile.linux": "zsh",
        "todo.embedded.exclude": [
          "**/*.html",
          "**/*.map",
          "**/*.min.*",
          "**/*.{3ds,3g2,3gp,7z,a,aac,adp,ai,aif,aiff,alz,ape,apk,ar,arj,asf,au,avi,bak,baml,bh,bin,bk,bmp,btif,bz2,bzip2,cab,caf,cgm,class,cmx,cpio,cr2,csv,cur,dat,dcm,deb,dex,djvu,dll,dmg,dng,doc,docm,docx,dot,dotm,dra,DS_Store,dsk,dts,dtshd,dvb,dwg,dxf,ecelp4800,ecelp7470,ecelp9600,egg,eol,eot,epub,exe,f4v,fbs,fh,fla,flac,fli,flv,fpx,fst,fvt,g3,gif,graffle,gz,gzip,h261,h263,h264,icns,ico,ief,img,ipa,iso,jar,jpeg,jpg,jpgv,jpm,jxr,key,ktx,lha,lib,lvp,lz,lzh,lzma,lzo,m3u,m4a,m4v,mar,mdi,mht,mid,midi,mj2,mka,mkv,mmr,mng,mobi,mov,movie,mp3,mp4,mp4a,mpeg,mpg,mpga,mxu,nef,npx,numbers,o,oga,ogg,ogv,otf,pages,pbm,pcx,pdb,pdf,pea,pgm,pic,png,pnm,pot,potm,potx,ppa,ppam,ppm,pps,ppsm,ppsx,ppt,pptm,pptx,psd,pya,pyc,pyo,pyv,qt,rar,ras,raw,resources,rgb,rip,rlc,rmf,rmvb,rtf,rz,s3m,s7z,scpt,sgi,shar,sil,sketch,slk,smv,so,sub,swf,tar,tbz,tbz2,tga,tgz,thmx,tif,tiff,tlz,ttc,ttf,txz,udf,uvh,uvi,uvm,uvp,uvs,uvu,viv,vob,war,wav,wax,wbmp,wdp,weba,webm,webp,whl,wim,wm,wma,wmv,wmx,woff,woff2,wvx,xbm,xif,xla,xlam,xls,xlsb,xlsm,xlsx,xlt,xltm,xltx,xm,xmind,xpi,xpm,xwd,xz,z,zip,zipx}",
          "**/.*",
          "**/.*/**",
          "**/_output/**",
          "**/bower_components/**",
          "**/build/**",
          "**/CHANGELOG",
          "**/CHANGELOG.*",
          "**/dist/**",
          "**/node_modules/**",
          "**/out/**",
          "**/output/**",
          "**/release/**",
          "**/releases/**",
          "**/static/**",
          "**/target/**",
          "**/third_party/**",
          "**/vendor/**",
          "**/venv/**"
        ]
      }
    }
  }
}